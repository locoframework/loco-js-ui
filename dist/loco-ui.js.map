{"version":3,"file":"loco-ui.js","mappings":"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","sources":["webpack://LocoUI/webpack/universalModuleDefinition","webpack://LocoUI/webpack/bootstrap","webpack://LocoUI/webpack/runtime/define property getters","webpack://LocoUI/webpack/runtime/hasOwnProperty shorthand","webpack://LocoUI/webpack/runtime/make namespace object","webpack://LocoUI/./src/deps.js","webpack://LocoUI/./src/utils/dom.js","webpack://LocoUI/./src/ui.js","webpack://LocoUI/./src/ui/form.coffee","webpack://LocoUI/./src/locales/en.js","webpack://LocoUI/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LocoUI\"] = factory();\n\telse\n\t\troot[\"LocoUI\"] = factory();\n})(self, () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const Deps = {\n  getLocale: null,\n  wire: null,\n  I18n: null\n};\n\nexport default Deps;\n","const hasClass = (el, className) => {\n  if (el.classList != null) return el.classList.contains(className);\n\n  return new RegExp(\"(^| )\" + className + \"( |$)\", \"gi\").test(el.className);\n};\n\nconst addClass = (el, className) => {\n  if (el.classList != null) el.classList.add(className);\n  else el.className += \" \" + className;\n};\n\nconst removeClass = (el, className) => {\n  if (el.classList != null) el.classList.remove(className);\n  else\n    el.className = el.className.replace(\n      new RegExp(\"(^|\\\\b)\" + className.split(\" \").join(\"|\") + \"(\\\\b|$)\", \"gi\"),\n      \" \"\n    );\n};\n\nconst getUniqInputTypes = formEl => {\n  const types = Array.from(formEl).map(e => e.getAttribute(\"type\"));\n  return types.filter((v, i, a) => a.indexOf(v) === i);\n};\n\nexport { addClass, getUniqInputTypes, hasClass, removeClass };\n","import Form from \"./ui/form.coffee\";\n\nconst UI = {\n  Form\n};\n\nexport default UI;\n","import Deps from '../deps';\nimport { addClass, getUniqInputTypes, hasClass, removeClass } from \"../utils/dom\";\n\nclass Form\n  constructor: (opts = {}) ->\n    this.formId = opts.id\n    this.obj = opts.for\n    this.initObj = if opts.initObj? and opts.initObj then true else false\n    this.callbackSuccess = opts.callbackSuccess\n    this.callbackFailure = opts.callbackFailure\n    this.callbackActive = opts.callbackActive\n    this.form = this._findForm()\n    this.submit = null\n    this.submitVal = null\n    if this.form?\n      this.submit = this.form.querySelector '[type=\"submit\"]'\n    if this.submit?\n      this.submitVal = this.submit.value\n    this.locale = Deps.getLocale()\n\n  getObj: -> this.obj\n\n  render: ->\n    if this.initObj\n      this._assignAttribs()\n      this._handle()\n    else if this.form?\n      this.fill()\n      this._handle()\n\n  fill: (attr = null) ->\n    return null if not this.obj?\n    return null if not this.obj.constructor.attributes?\n    attributes = {}\n    if attr?\n      attributes[attr] = null\n    else\n      attributes = this.obj.constructor.attributes\n    for name, _ of attributes\n      remoteName = this.obj.getAttrRemoteName name\n      query = this.form.querySelector \"[data-attr=#{remoteName}]\"\n      continue if query is null\n      formEl = query.querySelectorAll \"input,textarea,select\"\n      continue if formEl.length is 0\n      if formEl.length is 1\n        formEl[0].value = this.obj[name]\n        continue\n      uniqInputTypes = getUniqInputTypes(formEl);\n      if uniqInputTypes.length is 1 and uniqInputTypes[0] is 'radio'\n        radioEl = Array.from(formEl).find (e) => e.value is String(this.obj[name])\n        if radioEl?\n          radioEl.checked = true\n          continue\n      if formEl[0].getAttribute(\"type\") isnt \"hidden\" and formEl[formEl.length - 1].getAttribute('type') isnt \"checkbox\"\n        continue\n      formEl[formEl.length - 1].checked = Boolean(this.obj[name])\n\n  _findForm: ->\n    return document.getElementById(\"#{this.formId}\") if this.formId?\n    if this.obj?\n      objName = this.obj.getIdentity().toLowerCase()\n      if this.obj.id?\n        document.getElementById \"edit_#{objName}_#{this.obj.id}\"\n      else\n        document.getElementById \"new_#{objName}\"\n\n  _handle: ->\n    this.form.addEventListener 'submit', (e) =>\n      e.preventDefault()\n      return if not this._canBeSubmitted()\n      if not this.obj?\n        this._submitForm()\n        return\n      this._assignAttribs()\n      this._hideErrors()\n      if this.obj.isInvalid()\n        this._renderErrors()\n        this.callbackFailure() if this.callbackFailure?\n        return\n      this._submittingForm false\n      clearForm = if this.obj.id? then false else true\n      this.obj.save()\n      .then (data) =>\n        this._alwaysAfterRequest()\n        if data.success\n          this._handleSuccess data, clearForm\n        else\n          this.callbackFailure() if this.callbackFailure?\n          this._renderErrors()\n      .catch (err) => this._connectionError()\n\n  _canBeSubmitted: ->\n    return true unless this.submit?\n    return false if hasClass(this.submit, 'active')\n    return false if hasClass(this.submit, 'success')\n    return false if hasClass(this.submit, 'failure')\n    true\n\n  _submitForm: ->\n    this._submittingForm()\n    url = this.form.getAttribute('action') + '.json'\n    data = new FormData this.form\n    req = new XMLHttpRequest()\n    req.open 'POST', url\n    req.setRequestHeader \"X-CSRF-Token\", document.querySelector(\"meta[name='csrf-token']\")?.content\n    req.onload = (e) =>\n      this._alwaysAfterRequest()\n      this.submit.blur() if this.submit?\n      if e.target.status >= 200 and e.target.status < 400\n        data = JSON.parse e.target.response\n        if data.success\n          this._handleSuccess data, this.form.getAttribute(\"method\") is \"POST\"\n        else\n          this._renderErrors data.errors\n       else if e.target.status >= 500\n         this._connectionError()\n    req.onerror = =>\n      this._alwaysAfterRequest()\n      this.submit.blur() if this.submit?\n      this._connectionError()\n    req.send data\n\n  _handleSuccess: (data, clearForm = true) ->\n    val = data.flash?.success ? Deps.I18n[this.locale].ui.form.success\n    if this.submit?\n      addClass(this.submit, 'success')\n      this.submit.value = val\n    if data.access_token?\n      Deps.wire.token = data.access_token;\n    if this.callbackSuccess?\n      if data.data?\n        this.callbackSuccess(data.data)\n      else\n        this.callbackSuccess()\n      return\n    setTimeout =>\n      if this.submit?\n        this.submit.disabled = false\n        removeClass(this.submit, 'success')\n        this.submit.value = this.submitVal\n      selector = \":not([data-loco-not-clear=true])\"\n      if clearForm\n        nodes = this.form.querySelectorAll \"input:not([type='submit'])#{selector}, textarea#{selector}\"\n        for node in nodes\n          node.value = ''\n    , 5000\n\n  _renderErrors: (remoteErrors = null) ->\n    return if this.obj? and not this.obj.errors?\n    return if not this.obj? and not remoteErrors?\n    data = if remoteErrors? then remoteErrors else this.obj.errors\n    for attrib, errors of data\n      remoteName = if this.obj? then this.obj.getAttrRemoteName(attrib) else attrib\n      if remoteName? and attrib isnt \"base\"\n        # be aware of invalid elements's nesting e.g. \"div\" inside of \"p\"\n        query = this.form.querySelector \"[data-attr=#{remoteName}]\"\n        continue if query is null\n        nodes = query.querySelectorAll \".errors[data-for=#{remoteName}]\"\n        continue if nodes.length is 0\n        for node in nodes\n          node.textContent = errors[0]\n        continue\n      if attrib is \"base\" and errors.length > 0\n        nodes = document.querySelectorAll \".errors[data-for='base']\"\n        if nodes.length is 1\n          nodes[0].textContent = errors[0]\n        else if this.submit?\n          this.submit.value = errors[0]\n    if this.submit?\n      if this.submit.value is this.submitVal or this.submit.value is Deps.I18n[this.locale].ui.form.sending\n        this.submit.value = Deps.I18n[this.locale].ui.form.errors.invalid_data\n      addClass(this.submit, 'failure')\n    this._showErrors()\n    setTimeout =>\n      if this.submit?\n        this.submit.disabled = false\n        removeClass(this.submit, 'failure')\n        this.submit.value = this.submitVal\n      for node in this.form.querySelectorAll('input.invalid, textarea.invalid, select.invalid')\n        removeClass(node, 'invalid')\n    , 1000\n\n  _assignAttribs: ->\n    return null if not this.obj.constructor.attributes?\n    for name, _ of this.obj.constructor.attributes\n      remoteName = this.obj.getAttrRemoteName name\n      query = this.form.querySelector \"[data-attr=#{remoteName}]\"\n      continue if query is null\n      formEl = query.querySelectorAll \"input,textarea,select\"\n      continue if formEl.length is 0\n      if formEl.length is 1\n        this.obj.assignAttr name, formEl[0].value\n        continue\n      uniqInputTypes = getUniqInputTypes(formEl);\n      if uniqInputTypes.length is 1 and uniqInputTypes[0] is 'radio'\n        radioEl = Array.from(formEl).find (e) => e.checked is true\n        if radioEl?\n          this.obj.assignAttr name, radioEl.value\n          continue\n      if formEl[0].getAttribute(\"type\") isnt \"hidden\" and formEl[formEl.length - 1].getAttribute('type') isnt \"checkbox\"\n        continue\n      if formEl[formEl.length - 1].checked is true\n        this.obj.assignAttr name, formEl[formEl.length - 1].value\n      else\n        this.obj.assignAttr name, formEl[0].value\n\n  _hideErrors: ->\n    for e in this.form.querySelectorAll('.errors')\n      if e.textContent.trim().length > 0\n        e.textContent = ''\n        e.style.display = 'none'\n\n  _showErrors: ->\n    for e in this.form.querySelectorAll('.errors')\n      if e.textContent.trim().length > 0\n        e.style.display = 'block'\n\n  _submittingForm: (hideErrors = true) ->\n    if this.submit?\n      removeClass(this.submit, 'success')\n      removeClass(this.submit, 'failure')\n      addClass(this.submit, 'active')\n      this.submit.value = Deps.I18n[this.locale].ui.form.sending\n    this.callbackActive() if this.callbackActive?\n    this._hideErrors() if hideErrors\n\n  _connectionError: ->\n    return unless this.submit?\n    removeClass(this.submit, 'active')\n    addClass(this.submit, 'failure')\n    this.submit.value = Deps.I18n[this.locale].ui.form.errors.connection\n    setTimeout =>\n      this.submit.disabled = false\n      removeClass(this.submit, 'failure')\n      this.submit.value = this.submitVal\n    , 3000\n\n  _alwaysAfterRequest: ->\n    return unless this.submit?\n    removeClass(this.submit, 'active')\n\nexport default Form","const en = {\n  ui: {\n    form: {\n      sending: \"Sending...\",\n      success: \"Success\",\n      errors: {\n        connection: \"Connection Error\",\n        invalid_data: \"Invalid data\"\n      }\n    }\n  }\n};\n\nexport default en;\n","import Deps from \"./deps\";\nimport UI from \"./ui\";\nimport en from \"./locales/en\";\n\nconst connect = connector => {\n  Deps.getLocale = connector.getLocale;\n  Deps.wire = connector.loco.getWire();\n  Deps.I18n = connector.I18n;\n  Deps.I18n.en = { ...en, ...Deps.I18n.en };\n};\n\nexport { UI, connect };\n"],"names":["root","factory","exports","module","define","amd","self","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","getLocale","wire","I18n","hasClass","el","className","classList","contains","RegExp","test","addClass","add","removeClass","remove","replace","split","join","getUniqInputTypes","formEl","Array","from","map","e","getAttribute","filter","v","i","a","indexOf","Form","opts","this","formId","id","initObj","callbackSuccess","callbackFailure","callbackActive","form","_findForm","submit","submitVal","querySelector","locale","getObj","render","_assignAttribs","_handle","fill","attr","constructor","attributes","remoteName","getAttrRemoteName","name","query","querySelectorAll","length","uniqInputTypes","radioEl","find","String","checked","Boolean","document","getElementById","objName","getIdentity","toLowerCase","addEventListener","preventDefault","_canBeSubmitted","_hideErrors","isInvalid","_renderErrors","_submittingForm","clearForm","save","then","data","_alwaysAfterRequest","success","_handleSuccess","err","_connectionError","_submitForm","url","FormData","req","XMLHttpRequest","open","setRequestHeader","content","onload","blur","target","status","JSON","parse","response","errors","onerror","send","val","ui","access_token","setTimeout","disabled","selector","nodes","node","remoteErrors","attrib","textContent","sending","invalid_data","_showErrors","assignAttr","trim","style","display","hideErrors","connection","connect","connector","Deps","loco","getWire","_objectSpread","en"],"sourceRoot":""}